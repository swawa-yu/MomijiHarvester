# MomijiHarvester 設計書

## 1. 要件定義

*   広島大学のシラバスサイト (`https://momiji.hiroshima-u.ac.jp/syllabusHtml`) から情報を抽出する。
    *   ルートページに存在する開講部局リンクのリストを取得する。
    *   各開講部局のページ内に存在する講義リンクのリストを取得する。
    *   講義詳細ページから情報を抽出する。
*   抽出した情報をCSV形式で出力する。
*   抽出した情報をJSON形式で出力する。
*   HTML構造は `docs/syllabusHtml-small/` のファイルを参考にする。
*   古いプロジェクトのソースコードの主要部が `src-old` 内にあるので、それを参考にする。このプロジェクトは古いプロジェクトのrewriteプロジェクトである。
*   型やテストを用いた堅牢な構成にする。

## 2. 設計

### 2.1. 概略設計

3.  取得したHTMLコンテンツをHTMLパーサー（BeautifulSoupを想定）を使用して必要な情報を抽出する。
4.  抽出した情報を構造化し、CSVデータとして整形する。
5.  CSVデータをファイルに書き出す。
6.  CSVデータを読み込み、JSONデータとして整形する。
7.  JSONデータをファイルに書き出す。

### 2.2. 機能設計

* 実行・設定機能
    *   設定ファイル読み込み機能
    *   コマンドライン引数パース機能
        *   少量件数のみの取得機能(確認用)
        *   全件取得機能
*   URLからのHTMLコンテンツ取得機能
*   HTMLパース機能
*   情報抽出機能（講義コード、科目名、担当教員など）
*   CSV出力機能
*   JSON出力機能
*   シラバスデータの構造取得機能
    *   開講部局のリスト
    *   講義情報のヘッダー

### 2.3. クラス構成

*   `SyllabusExtractor`: HTMLファイルからシラバス情報を抽出するクラス。
*   `DataConverter`: 抽出したデータをCSV/JSON形式に変換するクラス。
*   `main` 関数またはスクリプト: 処理フローを制御する。
